(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();class S{currentModal=null;open(e){this.currentModal=e;const t=document.getElementById(`${e}Modal`);t&&(t.style.display="block",document.body.style.overflow="hidden")}close(e){const t=e||this.currentModal;if(t){const n=document.getElementById(`${t}Modal`);n&&(n.style.display="none",document.body.style.overflow="auto")}this.currentModal=null}closeAll(){document.querySelectorAll(".modal").forEach(t=>{t.style.display="none"}),document.body.style.overflow="auto",this.currentModal=null}isOpen(e){return this.currentModal===e}setupEventListeners(){window.addEventListener("click",e=>{e.target.classList.contains("modal")&&this.close()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.currentModal&&this.close()})}}const g=new S;class B{toastElement=null;timeoutId=null;init(){this.toastElement=document.getElementById("toast")}show(e,t="success",n=3e3){if(this.toastElement||this.init(),!this.toastElement)return;const o=document.getElementById("toastMessage"),s=this.toastElement.querySelector("i");o&&(o.textContent=e),s&&(s.className=this.getIconClass(t)),this.toastElement.style.background=this.getBackgroundGradient(t),this.toastElement.style.display="block",this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.hide()},n)}hide(){this.toastElement&&(this.toastElement.style.display="none")}getIconClass(e){return{success:"fas fa-check-circle text-2xl mr-3",error:"fas fa-exclamation-circle text-2xl mr-3",info:"fas fa-info-circle text-2xl mr-3",warning:"fas fa-exclamation-triangle text-2xl mr-3"}[e]}getBackgroundGradient(e){return{success:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",error:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",info:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",warning:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}[e]}success(e,t){this.show(e,"success",t)}error(e,t){this.show(e,"error",t)}info(e,t){this.show(e,"info",t)}warning(e,t){this.show(e,"warning",t)}}const c=new B,u={BOOKINGS:"hennaBookings",RECEIPTS:"hennaReceipts",CUSTOMERS:"hennaCustomers"};class x{getItem(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return console.error(`Error reading ${e} from localStorage:`,t),[]}}setItem(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error writing ${e} to localStorage:`,n)}}getBookings(){return this.getItem(u.BOOKINGS)}saveBookings(e){this.setItem(u.BOOKINGS,e)}addBooking(e){const t=this.getBookings();t.push(e),this.saveBookings(t)}getReceipts(){return this.getItem(u.RECEIPTS)}saveReceipts(e){this.setItem(u.RECEIPTS,e)}addReceipt(e){const t=this.getReceipts();t.push(e),this.saveReceipts(t)}getCustomers(){return this.getItem(u.CUSTOMERS)}saveCustomers(e){this.setItem(u.CUSTOMERS,e)}findCustomer(e){return this.getCustomers().find(t=>t.email===e)}addOrUpdateCustomer(e){const t=this.getCustomers(),n=t.findIndex(o=>o.email===e.email);n!==-1?t[n]=e:t.push(e),this.saveCustomers(t)}clearAll(){localStorage.removeItem(u.BOOKINGS),localStorage.removeItem(u.RECEIPTS),localStorage.removeItem(u.CUSTOMERS)}}const l=new x;class k{createBooking(e){const t={...e,id:`BK${Date.now()}`,status:"Pending Payment",createdAt:new Date().toISOString()};return l.addBooking(t),t}processPayment(e,t){e.status="Paid";const n=l.getBookings(),o=n.findIndex(m=>m.id===e.id);o!==-1&&(n[o]=e,l.saveBookings(n));const s={id:`RCP${Date.now()}`,bookingId:e.id,customer:e.name,email:e.email,amount:e.amount,date:new Date().toISOString(),method:"Credit Card",status:"Paid",cardLast4:t};l.addReceipt(s);let a=l.findCustomer(e.email);return a?(a.totalSpent+=e.amount,a.bookings+=1):a={name:e.name,email:e.email,phone:e.phone,totalSpent:e.amount,bookings:1,joinedAt:new Date().toISOString()},l.addOrUpdateCustomer(a),{receipt:s,customer:a}}getBookingById(e){return l.getBookings().find(t=>t.id===e)}getAllBookings(){return l.getBookings()}}const b=new k,y=i=>`$${i.toFixed(2)}`,I=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),L=i=>/^[\d\s\-\+\(\)]+$/.test(i)&&i.replace(/\D/g,"").length>=10,C=i=>i.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim(),P=i=>i.replace(/\s/g,"").slice(-4),D=i=>{const e=document.getElementById(i);e&&e.scrollIntoView({behavior:"smooth",block:"start"})};class ${form=null;currentPrice=0;pendingBooking=null;init(){this.form=document.getElementById("bookingForm"),this.form&&this.form.addEventListener("submit",this.handleSubmit.bind(this));const e=document.querySelector('select[name="service"]');e&&e.addEventListener("change",t=>{this.updatePrice(t.target.value)})}updatePrice(e){const t=document.getElementById("priceDisplay"),n=document.getElementById("totalAmount");if(e.includes("-")){const o=parseInt(e.split("-")[1]);this.currentPrice=o,n&&(n.textContent=`$${o}`),t&&t.classList.remove("hidden")}else this.currentPrice=0,t&&t.classList.add("hidden")}async handleSubmit(e){if(e.preventDefault(),!this.form)return;const t=new FormData(this.form),n=t.get("email"),o=t.get("phone");if(!M(n)){c.error("Please enter a valid email address");return}if(!L(o)){c.error("Please enter a valid phone number");return}if(this.currentPrice===0){c.warning("Please select a service with a price");return}const s=t.get("service").split("-")[0].replace(/-/g," ").replace(/\b\w/g,h=>h.toUpperCase()),a={name:t.get("name"),email:t.get("email"),phone:t.get("phone"),service:s,date:t.get("date"),time:t.get("time"),details:t.get("details"),amount:this.currentPrice};this.pendingBooking=b.createBooking(a);const m=document.getElementById("paymentAmount");m&&(m.textContent=`$${this.currentPrice.toFixed(2)}`),g.close("booking"),g.open("payment")}getPendingBooking(){return this.pendingBooking}clearPendingBooking(){this.pendingBooking=null,this.currentPrice=0,this.form?.reset();const e=document.getElementById("priceDisplay");e&&e.classList.add("hidden")}}const f=new $;class R{getStats(){const e=l.getBookings(),t=l.getReceipts(),n=t.reduce((d,r)=>d+r.amount,0),o=e.filter(d=>d.status==="Paid").length,s=new Date,a=s.getMonth(),m=s.getFullYear(),h=t.filter(d=>{const r=new Date(d.date);return r.getMonth()===a&&r.getFullYear()===m}).reduce((d,r)=>d+r.amount,0);return{totalRevenue:n,totalBookings:e.length,paidCustomers:o,monthRevenue:h}}getRecentBookings(e=5){return l.getBookings().sort((t,n)=>new Date(n.createdAt).getTime()-new Date(t.createdAt).getTime()).slice(0,e)}getMonthlyRevenue(e=6){const t=l.getReceipts(),n=new Date,o=[];for(let s=e-1;s>=0;s--){const a=new Date(n.getFullYear(),n.getMonth()-s,1),m=a.toLocaleDateString("en-US",{month:"short"}),h=t.filter(d=>{const r=new Date(d.date);return r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear()}).reduce((d,r)=>d+r.amount,0);o.push({month:m,revenue:h})}return o}}const v=new R;class A{init(){this.setupNavigation()}setupNavigation(){document.querySelectorAll(".dashboard-nav-item").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=t.currentTarget.getAttribute("onclick")?.match(/'([^']+)'/)?.[1];n&&this.showSection(n)})})}showSection(e){document.querySelectorAll(".dashboard-section").forEach(n=>{n.classList.add("hidden")});const t=document.getElementById(`${e}-section`);t&&t.classList.remove("hidden"),this.updateSectionContent(e)}updateSectionContent(e){switch(e){case"overview":this.updateOverview();break;case"bookings":this.updateBookingsTable();break;case"receipts":this.updateReceiptsTable();break;case"customers":this.updateCustomersTable();break}}updateStats(){const e=v.getStats();this.updateElement("totalRevenue",y(e.totalRevenue)),this.updateElement("totalBookings",e.totalBookings.toString()),this.updateElement("paidCustomers",e.paidCustomers.toString()),this.updateElement("monthRevenue",y(e.monthRevenue)),this.updateElement("happyCustomers",`${e.paidCustomers}+`)}updateOverview(){this.updateStats(),this.updateRecentBookings()}updateRecentBookings(){const e=v.getRecentBookings(5),t=document.getElementById("recentBookingsList");if(t){if(e.length===0){t.innerHTML='<p class="text-gray-500 text-center py-8">No bookings yet</p>';return}t.innerHTML=e.map(n=>`
      <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
        <div>
          <p class="font-semibold text-gray-800">${n.name}</p>
          <p class="text-sm text-gray-500">${n.service}</p>
        </div>
        <span class="px-3 py-1 rounded-full text-sm ${n.status==="Paid"?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}">
          ${n.status}
        </span>
      </div>
    `).join("")}}updateBookingsTable(){const e=l.getBookings(),t=document.getElementById("bookingsTable");if(t){if(e.length===0){t.innerHTML='<tr><td colspan="6" class="text-center py-8 text-gray-500">No bookings yet</td></tr>';return}t.innerHTML=e.map(n=>`
      <tr class="receipt-row border-b border-gray-100">
        <td class="py-3 px-4">${n.id}</td>
        <td class="py-3 px-4">${n.name}</td>
        <td class="py-3 px-4">${n.service}</td>
        <td class="py-3 px-4">${I(n.date)}</td>
        <td class="py-3 px-4 font-semibold">${y(n.amount)}</td>
        <td class="py-3 px-4">
          <span class="px-3 py-1 rounded-full text-sm ${n.status==="Paid"?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}">
            ${n.status}
          </span>
        </td>
      </tr>
    `).join("")}}updateReceiptsTable(){const e=l.getReceipts(),t=document.getElementById("receiptsTable");if(t){if(e.length===0){t.innerHTML='<tr><td colspan="6" class="text-center py-8 text-gray-500">No receipts yet</td></tr>';return}t.innerHTML=e.map(n=>`
      <tr class="receipt-row border-b border-gray-100">
        <td class="py-3 px-4 font-mono">${n.id}</td>
        <td class="py-3 px-4">${n.customer}</td>
        <td class="py-3 px-4">${I(n.date)}</td>
        <td class="py-3 px-4 font-semibold text-green-600">${y(n.amount)}</td>
        <td class="py-3 px-4">${n.method}</td>
        <td class="py-3 px-4">
          <button onclick="downloadReceipt('${n.id}')" class="text-purple-600 hover:text-purple-800">
            <i class="fas fa-download"></i> Download
          </button>
        </td>
      </tr>
    `).join("")}}updateCustomersTable(){const e=l.getCustomers(),t=document.getElementById("customersTable");if(t){if(e.length===0){t.innerHTML='<tr><td colspan="5" class="text-center py-8 text-gray-500">No customers yet</td></tr>';return}t.innerHTML=e.map(n=>`
      <tr class="receipt-row border-b border-gray-100">
        <td class="py-3 px-4 font-semibold">${n.name}</td>
        <td class="py-3 px-4">${n.email}</td>
        <td class="py-3 px-4">${n.phone}</td>
        <td class="py-3 px-4 font-semibold text-green-600">${y(n.totalSpent)}</td>
        <td class="py-3 px-4">${n.bookings}</td>
      </tr>
    `).join("")}}updateElement(e,t){const n=document.getElementById(e);n&&(n.textContent=t)}login(){document.querySelectorAll("body > *:not(#dashboard):not(#toast)").forEach(t=>{t.style.display="none"});const e=document.getElementById("dashboard");e&&(e.classList.remove("hidden"),e.style.display="block"),this.updateStats(),this.showSection("overview")}logout(){sessionStorage.removeItem("adminLoggedIn");const e=document.getElementById("dashboard");e&&(e.classList.add("hidden"),e.style.display="none"),document.querySelectorAll("body > *:not(#dashboard):not(#toast)").forEach(t=>{t.style.display=""}),window.location.href="/"}}const p=new A;class T{form=null;init(){this.form=document.getElementById("paymentForm"),this.form&&(this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.setupCardFormatting())}setupCardFormatting(){const e=this.form?.querySelector('input[placeholder*="1234"]');e&&e.addEventListener("input",o=>{const s=o.target,a=s.value.replace(/\s/g,"");s.value=C(a)});const t=this.form?.querySelector('input[placeholder="MM/YY"]');t&&t.addEventListener("input",o=>{const s=o.target;let a=s.value.replace(/\D/g,"");a.length>=2&&(a=a.slice(0,2)+"/"+a.slice(2,4)),s.value=a});const n=this.form?.querySelector('input[placeholder="123"]');n&&n.addEventListener("input",o=>{const s=o.target;s.value=s.value.replace(/\D/g,"").slice(0,3)})}async handleSubmit(e){e.preventDefault();const t=f.getPendingBooking();if(!t){c.error("No booking found. Please start over.");return}if(!this.form)return;const n=new FormData(this.form),o=this.form.querySelector('input[placeholder*="1234"]'),s=(n.get("cardNumber")||o?.value||"").replace(/\s/g,""),a=P(s);if(s.length<13||s.length>19){c.error("Please enter a valid card number");return}c.info("Processing payment..."),setTimeout(()=>{try{b.processPayment(t,a),p.updateStats(),g.close("payment"),f.clearPendingBooking(),this.form?.reset(),c.success("Payment successful! Booking confirmed.")}catch(m){console.error("Payment error:",m),c.error("Payment failed. Please try again.")}},1500)}}const N=new T;class O{ADMIN_EMAIL="admin@linaihenna.com";ADMIN_PASSWORD="admin123";init(){const e=document.getElementById("loginForm");e&&e.addEventListener("submit",this.handleLogin.bind(this))}async handleLogin(e){e.preventDefault();const t=document.getElementById("loginEmail"),n=document.getElementById("loginPassword");if(!t||!n)return;const o={email:t.value,password:n.value};this.validateCredentials(o)?(g.close("login"),p.login(),c.success("Welcome back, Admin!")):c.error("Invalid credentials. Please try again.")}validateCredentials(e){return e.email===this.ADMIN_EMAIL&&e.password===this.ADMIN_PASSWORD}logout(){p.logout(),c.success("Logged out successfully")}}const w=new O;class F{images=[];currentImageIndex=0;imageFiles=["henna-1.jpg","henna-2.jpg","henna-3.jpg","henna-4.jpg","henna-5.jpg","henna-6.jpg","henna-7.jpg","henna-8.jpg","henna-9.jpg","henna-10.jpg"];constructor(){this.loadImages()}loadImages(){const e=window.location.pathname.includes("/Henna/")?"/Henna":"";this.images=this.imageFiles.map(t=>`${e}/images/${t}`)}getAllImages(){return this.images}getImage(e){return this.images[e]||this.images[0]}getTotalImages(){return this.images.length}renderGallery(e){this.renderCarouselRow("gallery-row-1",0,5),this.renderCarouselRow("gallery-row-2",5,10),console.log(`âœ… Gallery carousel rendered with ${this.images.length} images`)}renderCarouselRow(e,t,n){const o=document.getElementById(e);if(!o){console.error(`Gallery row ${e} not found`);return}o.innerHTML="";const s=this.images.slice(t,n);[...s,...s,...s].forEach((m,h)=>{const d=t+h%s.length,r=document.createElement("div");r.className="gallery-item overflow-hidden rounded-2xl shadow-lg cursor-pointer",r.innerHTML=`
        <img 
          src="${m}" 
          alt="Henna Design ${d+1}" 
          class="w-full h-80 object-cover"
          loading="lazy"
          onerror="this.src='https://images.unsplash.com/photo-1610844012709-35bc3c4aac75?w=500&h=500&fit=crop'"
        >
      `,r.addEventListener("click",()=>{this.openImageModal(d)}),o.appendChild(r)})}openImageModal(e){this.currentImageIndex=e;const t=document.getElementById("modalImage"),n=document.getElementById("imageModal");t&&n&&(t.src=this.images[e],n.style.display="block",this.updateCounter(),this.setupModalNavigation(),this.setupNavigationButtons())}setupNavigationButtons(){const e=document.getElementById("prevImage"),t=document.getElementById("nextImage");e&&(e.onclick=()=>this.previousImage()),t&&(t.onclick=()=>this.nextImage())}updateCounter(){const e=document.getElementById("currentImageNum"),t=document.getElementById("totalImagesNum");e&&(e.textContent=(this.currentImageIndex+1).toString()),t&&(t.textContent=this.images.length.toString())}setupModalNavigation(){const e=t=>{t.key==="ArrowRight"?this.nextImage():t.key==="ArrowLeft"?this.previousImage():t.key==="Escape"&&(this.closeModal(),document.removeEventListener("keydown",e))};document.addEventListener("keydown",e)}nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.images.length,this.updateModalImage(),this.updateCounter()}previousImage(){this.currentImageIndex=(this.currentImageIndex-1+this.images.length)%this.images.length,this.updateModalImage(),this.updateCounter()}updateModalImage(){const e=document.getElementById("modalImage");e&&(e.src=this.images[this.currentImageIndex])}closeModal(){const e=document.getElementById("imageModal");e&&(e.style.display="none")}}const E=new F;class j{init(){console.log("ðŸŽ¨ Linai Henna Business - Initializing..."),this.checkAdminLogin(),g.setupEventListeners(),c.init(),f.init(),N.init(),p.init(),w.init(),this.setupGallery(),this.setupGlobalFunctions(),this.setupSmoothScrolling(),this.setupContactForm(),console.log("âœ… Application initialized successfully")}checkAdminLogin(){const e=new URLSearchParams(window.location.search);sessionStorage.getItem("adminLoggedIn")==="true"&&e.get("dashboard")==="true"&&setTimeout(()=>{const n=document.querySelector("body > *:not(#dashboard):not(#toast)");n&&(n.style.display="none"),document.querySelectorAll("body > *:not(#dashboard):not(#toast)").forEach(o=>{o.style.display="none"}),p.login(),c.success("Welcome back, Admin!")},100)}setupGallery(){E.renderGallery("image-gallery"),console.log(`âœ… Gallery loaded: ${E.getTotalImages()} images`)}setupGlobalFunctions(){window.showBookingModal=()=>g.open("booking"),window.showLoginModal=()=>{const e=window.location.pathname.split("/").slice(0,-1).join("/");window.location.href=`${e}/admin.html`},window.closeModal=e=>g.close(e),window.logout=()=>{sessionStorage.removeItem("adminLoggedIn"),w.logout()},window.showDashboardSection=e=>p.showSection(e),window.showImageModal=e=>{const t=document.getElementById("modalImage");t&&(t.src=e),g.open("image")},window.downloadReceipt=e=>{c.success(`Receipt ${e} downloaded`)}}setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute("href");n&&n.length>1&&D(n.substring(1))})})}setupContactForm(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",t=>{t.preventDefault(),c.success("Thank you! We'll get back to you soon."),e.reset()})}}document.addEventListener("DOMContentLoaded",()=>{new j().init()});
//# sourceMappingURL=index-VeKDLtwe.js.map
